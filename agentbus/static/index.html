<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentBus - AI 编程助手</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="/static/js/app.js" defer></script>
</head>
<body>
    <div class="app-container">
        <!-- 左侧边栏 - 虚拟机选择 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>AgentBus</h2>
            </div>
            
            <div class="vm-section">
                <h3>目标虚拟机</h3>
                <select id="vm-select" class="vm-select">
                    <option value="local">本地环境</option>
                    <option value="remote">远程服务器</option>
                </select>
                <div id="vm-config" class="vm-config" style="display: none;">
                    <input type="text" id="vm-host" placeholder="服务器地址" class="vm-input">
                    <input type="text" id="vm-username" placeholder="用户名" class="vm-input">
                    <input type="password" id="vm-password" placeholder="密码" class="vm-input">
                </div>
            </div>

            <div class="sidebar-section">
                <h3>执行模式</h3>
                <div class="mode-options">
                    <label class="mode-option">
                        <input type="radio" name="mode" value="chat" checked>
                        <span class="mode-label">💬 对话模式</span>
                    </label>
                    <label class="mode-option">
                        <input type="radio" name="mode" value="bash">
                        <span class="mode-label">💻 强制 Bash (!)</span>
                    </label>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>模型选择</h3>
                <select id="model-select" class="model-select">
                    <option value="default">默认模型</option>
                    <option value="gpt-4">GPT-4</option>
                    <option value="claude-3">Claude 3</option>
                    <option value="qwen">通义千问</option>
                </select>
            </div>

            <div class="sidebar-section">
                <h3>快捷指令</h3>
                <div class="quick-actions">
                    <button class="quick-btn" data-action="/help">帮助 /help</button>
                    <button class="quick-btn" data-action="/clear">清屏 /clear</button>
                    <button class="quick-btn" data-action="/model">切换模型 /model</button>
                    <button class="quick-btn" data-action="/cost">查看成本 /cost</button>
                </div>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 左侧对话区 -->
            <section class="chat-section">
                <div class="chat-header">
                    <h3>💬 对话</h3>
                    <div class="chat-actions">
                        <button id="new-chat-btn" class="action-btn" title="新建对话">➕</button>
                        <button id="clear-chat-btn" class="action-btn" title="清空对话">🗑️</button>
                    </div>
                </div>
                
                <div id="chat-container" class="chat-container">
                    <!-- 对话消息将在这里显示 -->
                </div>

                <div class="chat-input-area">
                    <div class="input-toolbar">
                        <button id="upload-btn" class="toolbar-btn" title="上传文件">📎</button>
                        <input type="file" id="file-input" hidden multiple>
                    </div>
                    <div class="input-wrapper">
                        <textarea id="chat-input" placeholder="输入消息... (Ctrl+Enter 发送, Enter 换行)" rows="3"></textarea>
                        <div class="input-hints">
                            <span class="hint">💡 提示: 输入 ! 进入强制 Bash 模式</span>
                            <span class="hint">📎 点击 📎 上传文件</span>
                        </div>
                    </div>
                    <button id="send-btn" class="send-btn">发送</button>
                </div>
            </section>

            <!-- 右侧视窗区 -->
            <section class="terminal-section">
                <div class="terminal-header">
                    <h3>🖥️ 视窗</h3>
                    <div class="terminal-actions">
                        <button id="terminal-clear-btn" class="action-btn" title="清空终端">🗑️</button>
                        <button id="terminal-copy-btn" class="action-btn" title="复制内容">📋</button>
                    </div>
                </div>
                
                <div id="terminal-container" class="terminal-container">
                    <div class="terminal-output" id="terminal-output">
                        <!-- 终端输出将在这里显示 -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 提示框 -->
    <div id="toast" class="toast"></div>
</body>
</html>
